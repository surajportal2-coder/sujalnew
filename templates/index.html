<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>SUJAL HAWK 2025</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body{background:#000;color:#0f0;font-family:'Courier New';min-height:100vh}
        .card{background:rgba(0,255,0,0.1);border:2px solid #0f0;border-radius:15px;padding:20px}
        input,textarea{background:#000;color:#0f0;border:1px solid #0f0}
        .console{background:#000;color:#0f0;height:500px;overflow-y:auto;padding:15px;border:2px solid #0f0;font-size:15px}
        .blink{animation:b 1s infinite}@keyframes b{50%{opacity:0.5}}
    </style>
</head>
<body class="p-4">
<div class="container">
    <h1 class="text-center display-4 mb-4">SUJAL HAWK SPAMMER 2025</h1>
    <div class="text-center mb-4">
        <span id="status" class="badge bg-secondary fs-3 px-5 py-2">STOPPED</span>
        <span class="badge bg-success fs-3 mx-3">SENT: <span id="sent">0</span></span>
        <span class="badge bg-info fs-3">UPTIME: <span id="uptime">00:00:00</span></span>
    </div>

    <form id="form" class="card mb-4">
        <div class="row g-3">
            <div class="col-12"><textarea name="sessionid" class="form-control" rows="2" placeholder="Session ID" required></textarea></div>
            <div class="col-12"><input name="thread_id" class="form-control" placeholder="Thread ID" required></div>
            <div class="col-12"><input name="group_name" class="form-control" placeholder="Group Name Base" required></div>
            <div class="col-12"><textarea name="messages" class="form-control" rows="8" placeholder="Messages (1 per line)" required></textarea></div>
            <div class="col-md-3"><input name="delay" type="number" step="0.1" class="form-control" value="12"></div>
            <div class="col-md-3"><input name="cycle" type="number" class="form-control" value="35"></div>
            <div class="col-md-3"><input name="break_sec" type="number" class="form-control" value="40"></div>
        </div>
        <div class="text-center mt-4">
            <button type="submit" class="btn btn-success btn-lg px-5">START BOMBING</button>
            <button type="button" onclick="fetch('/stop').then(update)" class="btn btn-danger btn-lg px-5 ms-3">STOP</button>
        </div>
    </form>

    <div class="card">
        <h3 class="text-center">LIVE CONSOLE</h3>
        <div id="console" class="console"></div>
    </div>
</div>

<script>
function update(){
    fetch("/status").then(r=>r.json()).then(d=>{
        document.getElementById("sent").innerText = d.sent;
        document.getElementById("uptime").innerText = d.uptime;
        document.getElementById("status").innerText = d.running ? "BOMBING" : "STOPPED";
        document.getElementById("status").className = d.running ? "badge bg-danger blink fs-3 px-5 py-2" : "badge bg-secondary fs-3 px-5 py-2";
        document.getElementById("console").innerHTML = d.logs.map(l => `<div>${l}</div>`).join("");
        document.getElementById("console").scrollTop = 999999;
    });
}
document.getElementById("form").onsubmit = e => {
    e.preventDefault();
    fetch("/start", {method: "POST", body: new FormData(e.target)}).then(update);
};
setInterval(update, 2000);
update();
</script>
</body>
</html>
